---
import Base from '../layouts/Base.astro';
import Section from '../components/Section.astro';
import { useTranslations } from '../i18n/utils';

const t = useTranslations('it');
---
<Base title={t('site.title')} description={t('site.description')}>
  <script is:inline>
    (function() {
      var STORAGE_KEY = 'preferred-lang';
      var stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        if (stored === 'en' && window.location.pathname === '/') {
          window.location.replace('/en/');
        }
        return;
      }
      var browserLang = navigator.language || navigator.userLanguage || '';
      var isItalian = browserLang.startsWith('it');
      if (!isItalian && window.location.pathname === '/') {
        localStorage.setItem(STORAGE_KEY, 'en');
        window.location.replace('/en/');
      } else {
        localStorage.setItem(STORAGE_KEY, 'it');
      }
    })();
  </script>
  <main>
    <h1>{t('site.title')}</h1>
    <p set:html={t('intro.text')} />
    <p>{t('intro.sections')}</p>

    <Section title={t('section.entrepreneurship.title')} id="imprenditoria">
      <p set:html={t('section.entrepreneurship.p1')} />
      <p>{t('section.entrepreneurship.p2')}</p>
    </Section>

    <Section title={t('section.cs.title')} id="informatica">
      <p>{t('section.cs.p1')}</p>
      <p set:html={t('section.cs.p2')} />
    </Section>

    <Section title={t('section.fitness.title')} id="fitness">
      <p>{t('section.fitness.p1')}</p>
      <p>{t('section.fitness.p2')}</p>
    </Section>

    <Section title={t('section.cnv.title')} id="cnv">
      <p>{t('section.cnv.p1')}</p>
    </Section>

    <hr />

    <footer>
      <p><Fragment set:html={t('footer.contact')} /> <a href="mailto:toto.castaldi@gmail.com">toto.castaldi@gmail.com</a></p>
      <hr />
      <p><strong>{t('footer.noai')}</strong></p>
    </footer>
  </main>
</Base>
