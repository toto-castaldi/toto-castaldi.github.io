---
phase: 06-lighthouse-audit
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/i18n/ui.ts
autonomous: true
requirements:
  - PERF-01
  - PERF-02
  - PERF-03
  - PERF-04

must_haves:
  truths:
    - "Lighthouse SEO score >= 95 on /en/ page"
    - "Lighthouse Performance score >= 95 (no regression from 100)"
    - "Lighthouse Accessibility score >= 95 (no regression from 100)"
    - "Lighthouse Best Practices score >= 95 (no regression from 100)"
    - "No generic link text ('Here', 'Qui', 'click here') exists in translation strings"
  artifacts:
    - path: "src/i18n/ui.ts"
      provides: "Descriptive link text in section.cs.p2 for both IT and EN"
      contains: "repository GitHub"
  key_links:
    - from: "src/i18n/ui.ts"
      to: "src/pages/index.astro"
      via: "useTranslations('it') -> t('section.cs.p2') -> set:html"
      pattern: "section\\.cs\\.p2"
    - from: "src/i18n/ui.ts"
      to: "src/pages/en/index.astro"
      via: "useTranslations('en') -> t('section.cs.p2') -> set:html"
      pattern: "section\\.cs\\.p2"
---

<objective>
Fix the single Lighthouse SEO failure (link-text audit) and verify all four Lighthouse categories score >= 95.

Purpose: The site scores 100/100/100/91 (Perf/A11y/BP/SEO). The only failure is the `link-text` audit flagging generic text "Here"/"Qui" in translation strings. Fixing these two strings and re-running Lighthouse completes the final phase.

Output: Updated `src/i18n/ui.ts` with descriptive link text, verified Lighthouse scores >= 95 across all categories.
</objective>

<execution_context>
@/home/toto/.claude/get-shit-done/workflows/execute-plan.md
@/home/toto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-lighthouse-audit/06-RESEARCH.md
@src/i18n/ui.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix non-descriptive link text in IT and EN translations</name>
  <files>src/i18n/ui.ts</files>
  <action>
In `src/i18n/ui.ts`, rewrite the `section.cs.p2` value for BOTH locales to use descriptive link text instead of generic "Qui"/"Here".

**Italian (key: `section.cs.p2` in `it` block):**
Change from:
```
'<a href="https://github.com/toto-castaldi" target="_blank" rel="noopener noreferrer">Qui</a> i miei repo e <a href="https://toto-castaldi.com" target="_blank" rel="noopener noreferrer">Qui</a> dei progetti che ho creato.'
```
Change to:
```
'I miei <a href="https://github.com/toto-castaldi" target="_blank" rel="noopener noreferrer">repository GitHub</a> e i <a href="https://toto-castaldi.com" target="_blank" rel="noopener noreferrer">progetti che ho creato</a>.'
```

**English (key: `section.cs.p2` in `en` block):**
Change from:
```
'<a href="https://github.com/toto-castaldi" target="_blank" rel="noopener noreferrer">Here</a> are my repos and <a href="https://toto-castaldi.com" target="_blank" rel="noopener noreferrer">here</a> are some projects I have created.'
```
Change to:
```
'My <a href="https://github.com/toto-castaldi" target="_blank" rel="noopener noreferrer">GitHub repositories</a> and some <a href="https://toto-castaldi.com" target="_blank" rel="noopener noreferrer">projects I have created</a>.'
```

Do NOT change any other translation keys. Do NOT modify the href, target, or rel attributes. Only the visible link text and surrounding sentence structure change.

Why descriptive text: Lighthouse `link-text` audit has "here" on the English blocklist. "Qui" is not on any blocklist, but since the redirect sends Lighthouse to /en/, the English text is what gets audited. Fix both for correctness regardless.
  </action>
  <verify>
Run `npm run build` to confirm no build errors. Then grep the built HTML to confirm:
- `dist/en/index.html` contains "GitHub repositories" (not "Here")
- `dist/index.html` contains "repository GitHub" (not "Qui" as standalone link text)
  </verify>
  <done>Both IT and EN `section.cs.p2` strings use descriptive link text. Build succeeds. No other translation keys changed.</done>
</task>

<task type="auto">
  <name>Task 2: Run Lighthouse audit and verify all scores >= 95</name>
  <files>src/i18n/ui.ts</files>
  <action>
Run a full Lighthouse audit against the built site to verify all four categories score >= 95.

Steps:
1. Build the site: `npm run build`
2. Start the preview server in background: `npx astro preview &` (wait for it to be ready)
3. Run Lighthouse CLI on `/en/` (the redirect means this also validates the shared layout used by `/`):
   ```
   npx lighthouse http://localhost:4321/en/ --output=json --output-path=./lighthouse-report.json --chrome-flags="--headless --no-sandbox" --only-categories=performance,accessibility,best-practices,seo
   ```
4. Parse the JSON to extract scores and verify each >= 95
5. If SEO is still < 95, check which specific audits fail and debug
6. Kill the preview server

Note on Italian page: Per research recommendation, accept structural equivalence. Both pages share identical layout, CSS, and meta structure. The only difference is translation content, and we fixed link text in both languages. Verifying `/en/` gives high confidence `/` also passes.

Do NOT add any new npm packages. Do NOT modify any files beyond what Task 1 already changed. Do NOT add robots.txt (zero-weight audit, does not affect score). Do NOT add speculative aria attributes (Accessibility is already 100).
  </action>
  <verify>
Lighthouse JSON report shows:
- performance: score >= 0.95
- accessibility: score >= 0.95
- best-practices: score >= 0.95
- seo: score >= 0.95

Print all four scores to stdout for verification.
  </verify>
  <done>All four Lighthouse categories score >= 95 on the /en/ page. No regressions from baseline (100/100/100 for Perf/A11y/BP). SEO improved from 91 to >= 95.</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with no errors or warnings
2. Built HTML contains descriptive link text (no "Here" or standalone "Qui")
3. Lighthouse CLI reports all four categories >= 95
4. No new npm dependencies added
5. Only `src/i18n/ui.ts` modified (single file, two string changes)
</verification>

<success_criteria>
- Lighthouse Performance >= 95 on /en/ (PERF-01)
- Lighthouse Accessibility >= 95 on /en/ (PERF-02)
- Lighthouse Best Practices >= 95 on /en/ (PERF-03)
- Lighthouse SEO >= 95 on /en/ (PERF-04)
- No regression in any category from baseline scores (100/100/100/91)
</success_criteria>

<output>
After completion, create `.planning/phases/06-lighthouse-audit/06-01-SUMMARY.md`
</output>
